<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quiz de Cultura General</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Montserrat:wght@400;700&display=swap" rel="stylesheet"/>
  <style>
   @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&family=Georgia&display=swap');
* { box-sizing: border-box; margin: 0; padding: 0; }
html, body { height: 100%; }
body {
  font-family: 'Georgia', serif;
  background: linear-gradient(-45deg, #6a0dad, #0f52ba, #b22222);
  background-size: 400% 400%;
  animation: fondoAnimado 15s ease infinite;
  color: white;
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 100vh;
  text-align: center;
  padding-top: 60px;
  padding-bottom: 90px;
}
@keyframes fondoAnimado {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
#panelSuperior {
  position: fixed;
  top: 0; left: 0; width: 100%; height: 60px;
  background: rgba(0,0,0,0.8);
  color: #00ffc3;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 15px;
  z-index: 10;
  font-family: 'Montserrat', sans-serif;
  font-weight: 600;
  box-shadow: 0 0 8px #00ffc3;
}
#panelSuperior div {
  display: flex;
  align-items: center;
  gap: 10px;
}
#timerDisplay {
  font-family: 'Press Start 2P', cursive;
  font-size: 0.9em;
}
#nivelDisplay, #progresoDisplay {
  font-size: 0.9rem;
}
#motivacion span {
  font-family: 'Press Start 2P', cursive;
  font-size: 0.8em;
}
#motivacion img {
  width: 28px;
  border-radius: 6px;
}
#panelSuperior button {
  font-family: 'Press Start 2P', cursive;
  font-size: 0.8em;
  padding: 5px 10px;
  background: #00ffc3;
  color: #1e1e2f;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  box-shadow: 0 0 5px rgba(0,255,195,0.7);
  transition: all 0.3s ease;
}
#panelSuperior button:hover {
  background: #00c2a8;
  color: #fff;
}
main {
  flex: 1; width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: auto;
}
.pantalla {
  display: none;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 20px;
  background: rgba(255,255,255,0.05);
  border-radius: 15px;
  box-shadow: 0 0 30px rgba(255,255,255,0.2);
  max-width: 720px;
  width: 90%;
  max-height: calc(100vh - 160px);
  overflow-y: auto;
}
.pantalla.active {
  display: flex;
}
#inicio h1 {
  font-size: 2rem;
  color: #ffffff;
  text-shadow: 0 0 8px #00ffc3;
  margin-bottom: 10px;
}
p.descripcion {
  font-size: 1.6rem;
  font-weight: 500;
  margin-bottom: 20px;
  color: #ffffff;
}
.botones-dificultad {
  display: flex;
  flex-direction: row;
  gap: 12px;
  width: 100%;
  justify-content: center;
  margin-bottom: 15px;
}
.boton {
  margin: 5px 0;
  padding: 12px 20px;
  background-color: #00ffc3;
  color: #000;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  font-family: 'Montserrat', sans-serif;
  font-weight: 700;
  font-size: 1rem;
  transition: 0.3s;
  box-shadow: 0 4px 10px rgba(0, 255, 195, 0.5);
  flex: 1;
  max-width: 200px;
}
.boton:hover {
  background-color: #00c2a8;
  color: white;
  transform: scale(1.05);
  box-shadow: 0 6px 15px rgba(0, 194, 168, 0.7);
}
#inicio button.volver {
  margin-top: 10px;
  max-width: 200px;
}
.pregunta {
  font-size: 1.6rem;
  margin: 20px 0 15px 0;
  font-weight: 700;
  font-family: 'Montserrat', sans-serif;
  text-shadow: 0 0 8px #00ffc3;
  text-align: center;
  width: 100%;
}
#personaje {
  width: 150px;
  margin: 10px 0 20px 0;
  border-radius: 15px;
  box-shadow: 0 0 15px #00ffc3;
}
#opciones {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  margin: 10px 0;
  width: 100%;
}
#opciones .boton {
  width: 100%;
  max-width: 500px;
  padding: 12px;
  background-color: #1e90ff;
  color: white;
  border: none;
  border-radius: 12px;
  font-size: 1.1rem;
  font-weight: 600;
  box-shadow: 0 4px 8px rgba(30,144,255,0.7);
  transition: 0.3s;
}
#opciones .boton:hover {
  background-color: #104e8b;
  box-shadow: 0 6px 15px rgba(16,78,139,0.9);
  transform: scale(1.05);
  border: 2px solid #00ffc3;
}
#pantallaTutorial video {
  width: 100%;
  max-width: 800px;
  border-radius: 12px;
  box-shadow: 0 0 15px rgba(0,255,180,0.3);
  margin-bottom: 15px;
}
footer {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  background: rgba(0,0,0,0.8);
  color: #00ffc3;
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  padding: 10px 15px;
  font-size: 0.75em;
  z-index: 10;
  flex-wrap: wrap;
  animation: footerGlow 3s ease-in-out infinite alternate;
}
@keyframes footerGlow {
  from { box-shadow: 0 -2px 6px rgba(0,255,180,0.3); }
  to   { box-shadow: 0 -2px 12px rgba(0,255,220,0.6); }
}
footer .izquierda {
  display: flex;
  flex-direction: column;
  gap: 4px;
}
footer .izquierda span::before {
  content: "‚Ä¢ ";
}
footer .izquierda .contacto {
  font-size: 0.9em;
  margin-top: 5px;
}
footer .derecha img {
  height: 60px;
  animation: logoPulse 4s infinite ease-in-out;
}
@keyframes logoPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}
#settingsModal {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.8);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 20;
}
#settingsContent {
  background: rgba(255,255,255,0.1);
  padding: 20px;
  border-radius: 12px;
  width: 90%;
  max-width: 400px;
  text-align: center;
}
#settingsContent h2 {
  color: #00ffc3;
  margin-bottom: 12px;
}
#google_translate_element {
  margin-top: 10px;
}
@media (max-width: 600px) {
  #inicio h1 { font-size: 1.5rem; }
  p.descripcion { font-size: 1.2rem; }
  .pregunta { font-size: 1.2rem; }
  .boton { font-size: 0.9rem; padding: 10px 16px; }
  #pantallaTutorial video { max-width: 90%; }
}
#logoPrincipal {
  width: 150px;
  max-width: 40%;
  margin-bottom: 15px;
  border-radius: 12px;
  box-shadow: 0 0 12px rgba(0, 255, 195, 0.4);
}
  </style>
</head>
<body>
  <div id="panelSuperior" class="oculto">
    <div id="nivelDisplay">Nivel: -</div>
    <div id="timerDisplay">00:00</div>
    <div id="progresoDisplay">Pregunta 0/0</div>
    <div id="motivacion"><img src="recursos/colegio.png" alt="Logo"><span>¬°T√∫ puedes, </span></div>
    <div>
      <button onclick="toggleFullscreen()">‚õ∂</button>
    </div>
  </div>
  <main>
    <div id="inicio" class="pantalla active">
      <img id="logoPrincipal" src="recursos/portada.png" alt="Portada" />
      <h1 id="bienvenidaNombre">Bienvenido</h1>
      <p class="descripcion">Pon a prueba tus conocimientos con nuestro quiz de cultura general. Responde correctamente y divi√©rtete aprendiendo.</p>
      <h2>Selecciona un nivel</h2>
      <div class="botones-dificultad">
        <button class="boton" onclick="mostrarTutorial('facil')">F√°cil</button>
        <button class="boton" onclick="mostrarTutorial('medio')">Medio</button>
        <button class="boton" onclick="mostrarTutorial('dificil')">Dif√≠cil</button>
      </div>
      <button class="boton volver" onclick="volver()">Volver a la Principal</button>
    </div>
    <div id="pantallaTutorial" class="pantalla">
      <h2>Tutorial</h2>
      <video id="videoTutorial" autoplay muted loop>
        <source src="recursos/tutorial.mp4" type="video/mp4">
      </video>
      <div class="botones-tutorial" style="display:flex;gap:12px;justify-content:center;width:100%;margin-top:15px;">
        <button class="boton" onclick="iniciarNivelDesdeTutorial()">Iniciar Juego</button>
        <button class="boton" onclick="volverATutorialInicio()">Volver</button>
      </div>
    </div>
    <div id="juego" class="pantalla">
      <div id="pregunta" class="pregunta"></div>
      <img id="personaje" src="" alt="Personaje" />
      <div id="opciones" class="opciones"></div>
    </div>
    <div id="resultado" class="pantalla">
      <h2 id="mensajeFinal"></h2>
      <div id="detalle"></div>
      <button class="boton" onclick="volverInicio()">Volver al inicio</button>
    </div>
  </main>
  <div id="settingsModal">
    <div id="settingsContent">
      <h2>Ajustes</h2>
      <div id="google_translate_element"></div>
      <button class="boton" style="margin-top:15px;" onclick="cerrarSettings()">Cerrar</button>
    </div>
  </div>
  <footer>
    <div class="izquierda">
      <span>Juego hecho por:</span>
      <span>Lucia Vilca</span>
      <span>Camila Chavez</span>
      <span>Jimena Maga√±o</span>
      <span>Yuliana Rodriguez</span>
    </div>
    <a href="https://www.colegioasuncion.edu.pe/"><div class="derecha"><img src="recursos/colegio.png" alt="Logo Empresa"></div></a>
  </footer>
  <script>
    const personajes = [
      "recursos/personaje1.png",
      "recursos/personaje2.png",
      "recursos/personaje3.png",
      "recursos/personaje4.png",
      "recursos/personaje5.png"
    ];
    const preguntas = {
      facil: [
        { pregunta: '¬øCapital de Per√∫?', opciones: ['Lima','Cusco','Arequipa','Trujillo','Tacna'], correcta: 'Lima' },
        { pregunta: '¬øColores de la bandera del Per√∫?', opciones: ['Rojo y blanco','Verde y rojo','Blanco y azul','Rojo y azul','Amarillo y rojo'], correcta: 'Rojo y blanco' },
        { pregunta: '¬øCu√°l es el r√≠o m√°s largo del mundo?', opciones: ['Amazonas','Nilo','Yangts√©','Misisipi','Mekong'], correcta: 'Amazonas' },
        { pregunta: '¬øQui√©n pint√≥ la Mona Lisa?', opciones: ['Leonardo da Vinci','Miguel √Ångel','Picasso','Dal√≠','Van Gogh'], correcta: 'Leonardo da Vinci' },
        { pregunta: '¬øEn qu√© continente est√° Egipto?', opciones: ['√Åfrica','Asia','Europa','Am√©rica','Ocean√≠a'], correcta: '√Åfrica' },
        { pregunta: '¬øCu√°l es el planeta m√°s cercano al Sol?', opciones: ['Mercurio','Venus','Tierra','Marte','J√∫piter'], correcta: 'Mercurio' },
        { pregunta: '¬øCu√°l es la moneda oficial de Jap√≥n?', opciones: ['Yen','D√≥lar','Euro','Won','Peso'], correcta: 'Yen' },
        { pregunta: '¬øQui√©n escribi√≥ "Don Quijote"?', opciones: ['Cervantes','Shakespeare','Tolstoi','Hemingway','Poe'], correcta: 'Cervantes' },
        { pregunta: '¬øCu√°l es el oc√©ano m√°s grande?', opciones: ['Pac√≠fico','Atl√°ntico','√çndico','√Årtico','Ant√°rtico'], correcta: 'Pac√≠fico' },
        { pregunta: '¬øEn qu√© pa√≠s se encuentra la Torre Eiffel?', opciones: ['Francia','Italia','Espa√±a','Alemania','Reino Unido'], correcta: 'Francia' }
      ],
      medio: [
        { pregunta: '¬øA√±o de la independencia del Per√∫?', opciones: ['1821','1824','1811','1830','1800'], correcta: '1821' },
        { pregunta: '¬øPrimer presidente del Per√∫?', opciones: ['San Mart√≠n','Riva Ag√ºero','Bol√≠var','S√°nchez Cerro','Pardo'], correcta: 'Riva Ag√ºero' },
        { pregunta: '¬øQu√© civilizaci√≥n construy√≥ Machu Picchu?', opciones: ['Inca','Azteca','Maya','Olmeca','Zapoteca'], correcta: 'Inca' },
        { pregunta: '¬øCu√°l es la capital de Australia?', opciones: ['Canberra','S√≠dney','Melbourne','Perth','Brisbane'], correcta: 'Canberra' },
        { pregunta: '¬øQui√©n fue el primer hombre en pisar la luna?', opciones: ['Neil Armstrong','Buzz Aldrin','Yuri Gagarin','John Glenn','Michael Collins'], correcta: 'Neil Armstrong' },
        { pregunta: '¬øQu√© invent√≥ Alexander Graham Bell?', opciones: ['Tel√©fono','Radio','Televisi√≥n','Autom√≥vil','Avi√≥n'], correcta: 'Tel√©fono' },
        { pregunta: '¬øQu√© guerra termin√≥ con la ca√≠da del Muro de Berl√≠n?', opciones: ['Guerra Fr√≠a','Primera Guerra Mundial','Segunda Guerra Mundial','Guerra de Vietnam','Guerra de Corea'], correcta: 'Guerra Fr√≠a' },
        { pregunta: '¬øQu√© pa√≠s es conocido como "la tierra del sol naciente"?', opciones: ['Jap√≥n','China','Corea','Vietnam','Tailandia'], correcta: 'Jap√≥n' },
        { pregunta: '¬øQui√©n escribi√≥ "La Odisea"?', opciones: ['Homero','S√≥focles','Plat√≥n','Arist√≥teles','Eur√≠pides'], correcta: 'Homero' },
        { pregunta: '¬øCu√°l es el elemento qu√≠mico con s√≠mbolo Fe?', opciones: ['Hierro','Oro','Plata','Cobre','Plomo'], correcta: 'Hierro' },
        { pregunta: '¬øQu√© pa√≠s tiene la mayor cantidad de habitantes?', opciones: ['China','India','Estados Unidos','Indonesia','Brasil'], correcta: 'China' },
        { pregunta: '¬øCu√°l es la monta√±a m√°s alta del mundo?', opciones: ['Everest','K2','Kangchenjunga','Lhotse','Makalu'], correcta: 'Everest' },
        { pregunta: '¬øCu√°l es la capital de Canad√°?', opciones: ['Ottawa','Toronto','Montreal','Vancouver','Calgary'], correcta: 'Ottawa' },
        { pregunta: '¬øQu√© sistema pol√≠tico defiende la propiedad estatal de los medios de producci√≥n?', opciones: ['Comunismo','Capitalismo','Socialismo','Democracia','Anarquismo'], correcta: 'Comunismo' },
        { pregunta: '¬øQui√©n fue la primera mujer en ganar un Nobel?', opciones: ['Marie Curie','Rosalind Franklin','Ada Lovelace','Dorothy Hodgkin','Jane Goodall'], correcta: 'Marie Curie' }
      ],
      dificil: [  
        { pregunta: '¬øLa guerra del Pac√≠fico fue entre...?', opciones: ['Per√∫, Chile, Bolivia','Per√∫, Ecuador, Chile','Chile, Argentina, Per√∫','Chile, Bolivia, Brasil','Per√∫, Colombia, Chile'], correcta: 'Per√∫, Chile, Bolivia' },
        { pregunta: '¬øInca que construy√≥ Machu Picchu?', opciones: ['Pachac√∫tec','Atahualpa','Hu√°scar','T√∫pac Yupanqui','Manco C√°pac'], correcta: 'Pachac√∫tec' },
        { pregunta: '¬øQui√©n escribi√≥ "Cien a√±os de soledad"?', opciones: ['Gabriel Garc√≠a M√°rquez','Pablo Neruda','Mario Vargas Llosa','Julio Cort√°zar','Jorge Luis Borges'], correcta: 'Gabriel Garc√≠a M√°rquez' },
        { pregunta: '¬øQu√© tratado puso fin a la Primera Guerra Mundial?', opciones: ['Tratado de Versalles','Tratado de Par√≠s','Tratado de Tordesillas','Tratado de Utrecht','Tratado de Viena'], correcta: 'Tratado de Versalles' },
        { pregunta: '¬øQui√©n fue Cleopatra?', opciones: ['Reina de Egipto','Emperatriz romana','Escritora griega','Fil√≥sofa romana','Reina de Babilonia'], correcta: 'Reina de Egipto' },
        { pregunta: '¬øQu√© evento marc√≥ el inicio de la Revoluci√≥n Francesa?', opciones: ['Toma de la Bastilla','Revoluci√≥n Industrial','Ca√≠da del Imperio Romano','Guerra de los Cien A√±os','Revoluci√≥n Americana'], correcta: 'Toma de la Bastilla' },
        { pregunta: '¬øCu√°l fue el prop√≥sito de la Ruta de la Seda?', opciones: ['Comercio entre Asia y Europa','Expansi√≥n militar','Difusi√≥n religiosa','Colonizaci√≥n de Am√©rica','Exploraci√≥n mar√≠tima'], correcta: 'Comercio entre Asia y Europa' },
        { pregunta: '¬øQu√© civilizaci√≥n construy√≥ las pir√°mides de Egipto?', opciones: ['Egipcia','Mesopot√°mica','Maya','Inca','Azteca'], correcta: 'Egipcia' },
        { pregunta: '¬øQui√©n fue el √∫ltimo emperador romano?', opciones: ['R√≥mulo Aug√∫stulo','Ner√≥n','Julio C√©sar','Constantino','Trajano'], correcta: 'R√≥mulo Aug√∫stulo' },
        { pregunta: '¬øQu√© tratado dividi√≥ Am√©rica entre Espa√±a y Portugal?', opciones: ['Tratado de Tordesillas','Tratado de Versalles','Tratado de Utrecht','Tratado de Par√≠s','Tratado de Viena'], correcta: 'Tratado de Tordesillas' },
        { pregunta: '¬øQu√© rey franc√©s fue conocido como el "Rey Sol"?', opciones: ['Luis XIV','Luis XVI','Carlos V','Francisco I','Napole√≥n'], correcta: 'Luis XIV' },
        { pregunta: '¬øQui√©n fue Juana de Arco?', opciones: ['Hero√≠na francesa','Reina inglesa','Escritora alemana','Fil√≥sofa italiana','Pintora espa√±ola'], correcta: 'Hero√≠na francesa' },
        { pregunta: '¬øQu√© revoluci√≥n dio inicio en 1917?', opciones: ['Revoluci√≥n Rusa','Revoluci√≥n Francesa','Revoluci√≥n Americana','Revoluci√≥n Industrial','Revoluci√≥n China'], correcta: 'Revoluci√≥n Rusa' },
        { pregunta: '¬øCu√°l es la capital de Hungr√≠a?', opciones: ['Budapest','Praga','Varsovia','Bucarest','Zagreb'], correcta: 'Budapest' },
        { pregunta: '¬øQui√©n invent√≥ la imprenta?', opciones: ['Johannes Gutenberg','Thomas Edison','Nikola Tesla','Benjamin Franklin','Alexander Graham Bell'], correcta: 'Johannes Gutenberg' },
        { pregunta: '¬øQu√© fue la Guerra de los Cien A√±os?', opciones: ['Conflicto entre Francia e Inglaterra','Guerra civil espa√±ola','Rebeli√≥n en Estados Unidos','Guerra entre Roma y Cartago','Conflicto en Italia'], correcta: 'Conflicto entre Francia e Inglaterra' },
        { pregunta: '¬øQui√©n fue el fundador del Imperio Mongol?', opciones: ['Gengis Kan','Tamerl√°n','Kublai Kan','Atila','Marco Polo'], correcta: 'Gengis Kan' },
        { pregunta: '¬øQu√© acontecimiento marc√≥ el inicio de la Edad Media?', opciones: ['Ca√≠da del Imperio Romano de Occidente','Revoluci√≥n Industrial','Descubrimiento de Am√©rica','Pax Romana','Renacimiento'], correcta: 'Ca√≠da del Imperio Romano de Occidente' },
        { pregunta: '¬øD√≥nde se firm√≥ la Declaraci√≥n de Independencia de Estados Unidos?', opciones: ['Filadelfia','Boston','Nueva York','Washington D.C.','Chicago'], correcta: 'Filadelfia' },
        { pregunta: '¬øCu√°l fue el prop√≥sito del Congreso de Viena?', opciones: ['Restaurar el orden en Europa tras Napole√≥n','Expandir el Imperio Otomano','Crear la Liga de Naciones','Iniciar la Revoluci√≥n Industrial','Fundar la Uni√≥n Europea'], correcta: 'Restaurar el orden en Europa tras Napole√≥n' }
      ]
    };
    let nivelSeleccionado = '', preguntasActuales = [], indice = 0, respuestas = [];
    let inicioTime = 0, timerInterval = null;
    const nombre = localStorage.getItem('nombreJugador') || 'Jugador';
    document.addEventListener('DOMContentLoaded', () => {
      const bienvenida = document.getElementById('bienvenidaNombre');
      if (bienvenida) bienvenida.textContent = `Bienvenido, ${nombre}!`;
      const motiv = document.querySelector('#motivacion span');
      if (motiv) motiv.textContent = `¬°T√∫ puedes, ${nombre}!`;
    });
    function mostrarPantalla(id) {
      document.querySelectorAll('.pantalla').forEach(p => p.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }
    function mostrarTutorial(nivel) {
      nivelSeleccionado = nivel;
      mostrarPantalla('pantallaTutorial');
    }
    function volverATutorialInicio() {
      mostrarPantalla('inicio');
    }
    function iniciarNivelDesdeTutorial() {
      iniciarNivel(nivelSeleccionado);
    }
    function iniciarNivel(nivel) {
      preguntasActuales = preguntas[nivel];
      indice = 0; respuestas = [];
      mostrarPantalla('juego');
      inicioTime = Date.now();
      clearInterval(timerInterval);
      document.getElementById('panelSuperior').classList.remove('oculto');
      document.getElementById('nivelDisplay').textContent = `Nivel: ${nivel.charAt(0).toUpperCase() + nivel.slice(1)}`;
      actualizarProgreso();
      timerInterval = setInterval(actualizarTimer, 500);
      mostrarPregunta();
    }
    function actualizarTimer() {
      const elapsed = Date.now() - inicioTime;
      const seconds = Math.floor(elapsed / 1000) % 60;
      const minutes = Math.floor(elapsed / 60000);
      const mm = String(minutes).padStart(2,'0'), ss = String(seconds).padStart(2,'0');
      document.getElementById('timerDisplay').textContent = `${mm}:${ss}`;
    }
    function actualizarProgreso() {
      const total = preguntasActuales.length;
      document.getElementById('progresoDisplay').textContent = `Pregunta ${indice+1}/${total}`;
    }
    function mostrarPregunta() {
      const p = preguntasActuales[indice];
      document.getElementById('pregunta').textContent = p.pregunta;
      const personajeAleatorio = personajes[Math.floor(Math.random() * personajes.length)];
      document.getElementById('personaje').src = personajeAleatorio;
      const opcionesDiv = document.getElementById('opciones');
      opcionesDiv.innerHTML = '';
      const opcionesMezcladas = [...p.opciones];
      for (let i = opcionesMezcladas.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [opcionesMezcladas[i], opcionesMezcladas[j]] = [opcionesMezcladas[j], opcionesMezcladas[i]];
      }
      opcionesMezcladas.forEach(op => {
        const btn = document.createElement('button');
        btn.className = 'boton';
        btn.textContent = op;
        btn.onclick = () => {
          respuestas.push({ pregunta: p.pregunta, respuesta: op, correcta: p.correcta });
          indice++;
          if (indice < preguntasActuales.length) {
            actualizarProgreso();
            mostrarPregunta();
          } else {
            mostrarResultado();
          }
        };
        opcionesDiv.appendChild(btn);
      });
    }
    function mostrarResultado() {
      clearInterval(timerInterval);
      document.getElementById('panelSuperior').classList.add('oculto');
      mostrarPantalla('resultado');
      document.getElementById('mensajeFinal').textContent = `¬°Felicidades, ${nombre}, por acabar! Estos son tus resultados.`;
      const detalle = document.getElementById('detalle');
      detalle.innerHTML = '';
      const aciertos = respuestas.filter(r => r.respuesta === r.correcta);
      const errores = respuestas.filter(r => r.respuesta !== r.correcta);
      const resumen = document.createElement('div');
      resumen.innerHTML = `
        <div style="text-align:center; margin-bottom: 25px;">
          <h3 style="color: #00ffc3;">üéØ Resumen</h3>
          <p><strong>Aciertos:</strong> ${aciertos.length} ‚úÖ</p>
          <p><strong>Errores:</strong> ${errores.length} ‚ùå</p>
        </div>`;
      detalle.appendChild(resumen);
      if (aciertos.length > 0) {
        const aciertosDiv = document.createElement('div');
        aciertosDiv.className = 'grupo-resultado aciertos';
        aciertosDiv.innerHTML = '<h4>‚úÖ Aciertos</h4>';
        aciertos.forEach(r => {
          const div = document.createElement('div');
          div.className = 'item-resultado correcto';
          div.innerHTML = `<strong>${r.pregunta}</strong><br>Tu respuesta: ${r.respuesta}`;
          aciertosDiv.appendChild(div);
        });
        detalle.appendChild(aciertosDiv);
      }
      if (errores.length > 0) {
        const erroresDiv = document.createElement('div');
        erroresDiv.className = 'grupo-resultado errores';
        erroresDiv.innerHTML = '<h4>‚ùå Errores</h4>';
        errores.forEach(r => {
          const div = document.createElement('div');
          div.className = 'item-resultado incorrecto';
          div.innerHTML = `<strong>${r.pregunta}</strong><br>Tu respuesta: ${r.respuesta}<br>Correcta: ${r.correcta}`;
          erroresDiv.appendChild(div);
        });
        detalle.appendChild(erroresDiv);
      }
    }
    function volverInicio() {
      mostrarPantalla('inicio');
    }
    function volver() {
      window.location.href = "../index.html";
    }
    function toggleFullscreen() {
      if (!document.fullscreenElement) document.documentElement.requestFullscreen();
      else document.exitFullscreen();
    }
    function abrirSettings() {
      document.getElementById('settingsModal').style.display = 'flex';
    }
    function cerrarSettings() {
      document.getElementById('settingsModal').style.display = 'none';
    }
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({pageLanguage:'es',layout:google.translate.TranslateElement.InlineLayout.SIMPLE},'google_translate_element');
    }
  </script>
  <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</body>
</html>
